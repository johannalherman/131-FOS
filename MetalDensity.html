<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chem 131 FOS-1 Metal Density Simulation</title>
  <style>
    body {
      max-width: 1000px;
      margin: auto;
      font: 24px Arial, sans-serif;     
      padding: 20px;
      text-align: center;          
    }
        
    #instruction-message {
      margin: auto;
      text-align: left;
    }
    
    hr {
      margin: auto;
      border: 5px solid #FF2E37;
      border-radius: 5px;
    }
    
    #dropdown-container {
      margin: 20px auto 20px auto;
      font-size: 16px;
      font-weight: bold;
      width: 650px;
      gap: 10px;
      padding: 10px 30px;
      background-color: #ffd7e1;
      border: 2px solid black;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    #resetButton {
      color: black;
      background-image: linear-gradient(#ff9ab3, #fedee6 50%, #ff9ab3);
      padding: 10px 20px;
      margin-left: 60px;
      border: 1px solid #FF2E37;
      user-select: none;
    }
    #resetButton:hover {
      border: 1px solid white;
    }

    #drag-ruler {
      /* Add your preferred styles for the ruler */
      width: 570px;
      height: 30px;
      background-color: darkblue;
      opacity: 0.75;
      font-size: 14px;
      text-align: right;
      padding-right: 10px;
      color: white;
      padding-top: 15px;
      border-radius: 1px;
      box-shadow: 1px 1px 1px black;
      z-index: 1000;  /* Add this line */
      bottom: -5%;
      right: 50%; transform: translateX(20%);
      user-select: none;
    }

    #cmText {
      transform: rotate(90deg);
      color: white;
    }

    #shape-buttons {
      display: flex;
      justify-content: center;  /* Center horizontally */
      align-items: center;  /* Align items vertically */
      margin: 20px;
      gap: 10px;
      user-select: none;
    }

    .shape-button {
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .shape-button:hover {
      border: 1px solid white;
    }
    .shape-button:focus {
      padding: 8px 18px;
      border: 4px solid #FF2E37;
    }

    #shapes-container {      
      display: flex;
      justify-content: center;
      flex-direction: column;
      padding: 60px 10px;
      gap: 80px;
      width: 100%;
    }

    .shape-container {
      display: flex;
      justify-content: center;
    }

    .shape {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      border: 1px solid black;
    }

    .sphere {
      border-radius: 50%;
      background: radial-gradient(circle, #ffc87f 30%, #d68a40 90%);
      box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.4), 5px 5px 10px rgba(0, 0, 0, 0.3);
    }

    .cube {
      width: 50px; /* Change width to make it a rectangle */
      height: 30px; /* Keep height smaller */
      background: linear-gradient(135deg, #ffc87f 40%, #d68a40 100%);
      box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
    }

    .cylinder {
      background: linear-gradient(180deg, #ffc87f 30%, #d68a40 100%);
      border-radius: 10px;
      box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.4), 5px 5px 10px rgba(0, 0, 0, 0.3);
    }
    
    .row {
      display: flex;
    }

    .column {
      flex: 50%;
      padding: 0px 20px;
    }
    
    @media screen and (max-width: 500px) {
    .column {
        width: 100%;
      }
    }

    .button-container button {
      margin-top: 40px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    
    #work-bench-1, #work-bench-2 {
      margin: 20px 0px 20px 0px;
      border: 2px solid #FF2E37;
      border-radius: 8px;
      box-shadow: 0 6px 6px rgba(0, 0, 0, 0.1);
      height: 650px;
      width: 450px;
      position: relative;
      display: inline-block;
    }
    
    #work-bench-3 {
      margin: 20px 0px 20px 0px;
      border: 2px solid #FF2E37;
      border-radius: 8px;
      box-shadow: 0 6px 6px rgba(0, 0, 0, 0.1);
      height: 410px;
      width: 450px;
      position: relative;
      display: inline-block;
    }

    #pan {
      /* background: black; */
      width: 150px;
      height: 10px;
      position: absolute;
      bottom: 49%;
      left: 50%;
      transform: translateX(-50%);
    }
        
    #total-mass {
      position: absolute;
      bottom: 28%; /* Adjust as needed */
      left: 50%; /* Adjust as needed */
      transform: translateX(-50%);
      border-radius: 5px;
      font-size: 24px;
      font-weight: bold;
      z-index: 0;
    }
    
    #beaker, #cylinder {
      width: 400px;
      z-index: 1;
    }
    
  </style>
</head>
<body>
<div id="instruction-message">
<h2 style="font-size: 24pt; color: #ff2e37; text-align: left;">
<strong>Simulation Instructions</strong>
</h2>
<p>Use this lab simulation to follow along with your Illustrated Experimental Plan for the FOS Lab Period 1 Experiment.
  <ol>
  <li>Use the <strong>drop-down menu</strong> to select your assigned set of metal pieces.</li>
  <li>In the left panel, use the <strong>shape tabs</strong> to toggle between the three differently shaped pieces of your assigned metal. <strong>Drag the ruler</strong> within the left panel to measure the three dimensions of each piece individually. Each piece will be displayed in three ways, so that all three sides of the object can be measured.</li>
  <li>In the right panel, </li>
  <li>In the bottom panel, use the buttons under the balance to obtain a mass for each peice of your metal.</li>
  </ol>
</p>
<p>You can restart the simulation at any time by clicking on the <strong>Reset All Controls</strong> button.</p>
</div>
<hr>
<div id="dropdown-container">
  <label for="shapeSetSelector">Select Assigned Metal:</label>
  <select id="shapeSetSelector">
    <option value="" selected>Choose from Dropdown</option>
    <option value="set1">Set 1</option>
    <option value="set2">Set 2</option>
    <option value="set3">Set 3</option>
  </select>
  <button id="resetButton" class="shape-button">Reset All Controls</button>
</div>
<div id="drag-ruler" style="position:absolute; cursor:move;"><span id="cmText">cm</span></div>
  <div class="row">

    <div class="column">
    
      <!--Area #1 Code-->
      <div id="work-bench-1"> 
      
        <div id="shape-buttons">
          <button id="View1" class="shape-button" type="button" disabled>Ellipsoid</button>
          <button id="View2" class="shape-button" type="button" disabled>Cuboid</button>
          <button id="View3" class="shape-button" type="button" disabled>Cylinder</button>
        </div>     
        <p style="font-size: 13.9pt; padding: 0px 10px;">The three images below display a single piece of your assigned metal. Each image represents the view from one angle of the same object.</p>
        <div id="shapes-container"></div>
      </div>
      
    </div>

    <div class="column">
    <div id="work-bench-2"></div>
    </div>
  </div>
    
      <!--Area #3 Code--> 
      <div id="work-bench-3" style="width: 95%">
        <div id="pan"></div>
        <img id="beaker" src="https://github.com/johannalherman/Chem131/blob/main/Balance.png?raw=true">
        <p id="total-mass"><span>0.000</span> g</p>
        <div class="button-container" style="margin-bottom: 40px;">
          <button id="addSphere" class="shape-button" type="button" disabled>Add Ellipsoid</button>
          <button id="addCube" class="shape-button" type="button" disabled>Add Cuboid</button>
          <button id="addCylinder" class="shape-button" type="button" disabled>Add Cylinder</button>
          <button id="tareButton" class="shape-button" style="margin-top: 10px;">Tare</button>
          <button id="removeShapes" class="shape-button">Clear Balance</button>
        </div>
      </div>
      
<hr>
<p style="font-size: 16pt; color: #ff2e37; text-align: left;"><em>This simulation was designed for use on a laptop or desktop computer. This simulation may not function properly on a mobile device.</em></p>

<script>

let currentSet = "";
let totalWeight = 0;
let tareOffset = 0;
let addedShapes = {};

function getRandomAmount(min, max) {
  return Math.random() * (max - min) + min;
}

function disableButtons1() {
  View1.disabled = true;
  View2.disabled = true;
  View3.disabled = true;
}

function enableButtons1() {
  View1.disabled = false;
  View2.disabled = false;
  View3.disabled = false;
}    

function disableButtons2() {
  addSphere.disabled = true;
  addCube.disabled = true;
  addCylinder.disabled = true;
}

function enableButtons2() {
  addSphere.disabled = false;
  addCube.disabled = false;
  addCylinder.disabled = false;
}

document.getElementById("shapeSetSelector").addEventListener("change", function(event) {
  // for Metal ruler measurement panel
  enableButtons1();
  totalMass1 = getRandomAmount(0.005, 0.05);
  tareOffset = 0;
  document.getElementById("shapes-container").innerHTML = "";

  // for Metal mass measurement panel
  currentSet = event.target.value;
  removeShapes(); // Remove previous shapes first
  totalWeight = parseFloat((getRandomAmount(0.005, 0.05)).toFixed(3));
  tareOffset = 0; // Reset tare offset when changing sets
  updateMassDisplay1();
  enableButtons2();
});

document.getElementById("resetButton").addEventListener("click", () => {
	// for Metal ruler measurement panel
  totalMass1 = 0;
  tareOffset = 0;
  disableButtons1();
  document.getElementById("shapes-container").innerHTML = "";
    
  // for Metal mass measurement panel
  totalWeight = 0;
  tareOffset = 0;
  currentSet = "";
  disableButtons2();
  removeShapes();
  updateMassDisplay1();

  // Reset dropdown
  const shapeSetSelector = document.getElementById("shapeSetSelector");
  shapeSetSelector.value = "";
});
  
function updateMassDisplay1() {
  document.getElementById("total-mass").textContent = `${(totalWeight - tareOffset).toFixed(3)} g`;
}

function removeShapes() {
  for (let shape in addedShapes) {
    totalWeight -= addedShapes[shape].mass;
    addedShapes[shape].element.remove();
  }
  addedShapes = {};
  updateMassDisplay1();
}


  // JavaScript to make the ruler draggable:
  var dragRuler = document.querySelector('#drag-ruler');
  var draggingRuler = false;

  document.onmousedown = function(event) {
    if (event.target == dragRuler) {
      draggingRuler = true;
      moveAt(event.pageX, event.pageY);
    }
  };

  document.onmousemove = function(event) {
    if (draggingRuler) {
      moveAt(event.pageX, event.pageY);
    }
  };

  document.onmouseup = function(event) {
    draggingRuler = false;
  };

  function moveAt(pageX, pageY) {
    dragRuler.style.left = pageX - dragRuler.offsetWidth / 2 + 'px';
    dragRuler.style.top = pageY - dragRuler.offsetHeight / 2 + 'px';
  }

  // Generate ticks
  for (let i = 5; i <= 105; i ++) {
    var tick = document.createElement('div');
    tick.style.width = '1px';
    tick.style.position = 'absolute';
    tick.style.left = i * 5 + 'px';
    tick.style.bottom = '0';
    tick.style.background = 'white';

    if (i % 10 === 0) {  // every 10th tick mark
      tick.style.height = '10px';
    } else if (i % 5 === 0) {  // every 5th tick mark
      tick.style.height = '15px';
      let label = document.createElement('div');
      label.textContent = (i - 5) / 10;  // Set the label text to the current tick number
      label.style.position = 'absolute';
      label.style.top = '-20px';  // Adjust this value as needed
      label.style.left = '-4px';  // Adjust this value as needed
      label.style.color = 'white';
      tick.appendChild(label);

    } else {  // default tick mark
      tick.style.height = '5px';
    }

    dragRuler.appendChild(tick);
  }

function addShapes_1(shapeClasses, dimensions, colorSet) {
    const mainContainer = document.getElementById('shapes-container');
    mainContainer.innerHTML = '';
    for (let i = 0; i < dimensions.length; i++) {
      const shapeElement = document.createElement('div');
      shapeElement.classList.add(shapeClasses[i]);
      shapeElement.style.width = dimensions[i].width + 'px';
      shapeElement.style.height = dimensions[i].height + 'px';
      const gradient = `linear-gradient(to right, ${colorSet.join(",")})`;
      shapeElement.style.background = gradient;
      const shapeContainer = document.createElement('div');
      shapeContainer.classList.add('shape-container');
      shapeContainer.appendChild(shapeElement);
      mainContainer.appendChild(shapeContainer);
    }
  }

  const set1Colors = ["#ffc87fff", "#ffc87fff", "#ffc87fff"];
  const set2Colors = ["#e69b56ff", "#e69b56ff", "#e69b56ff"];
  const set3Colors = ["#b7b7b7ff", "#b7b7b7ff", "#b7b7b7ff"];

  const sphereSet1Dimensions = [
    { width: 53.1, height: 48.8 },
    { width: 48.8, height: 58.3 },
    { width: 58.3, height: 53.1 },
  ];

  const sphereSet2Dimensions = [
    { width: 67.1, height: 56.8 },
    { width: 56.8, height: 62.7 },
    { width: 62.7, height: 67.1 },
  ];

  const sphereSet3Dimensions = [
    { width: 52.6, height: 63.9 },
    { width: 63.9, height: 59.2 },
    { width: 59.2, height: 52.6 },
  ];

  const cubeSet1Dimensions = [
    { width: 243.8, height: 52.2 },
    { width: 52.2, height: 24.5 },
    { width: 24.5, height: 52.2 },
  ];

  const cubeSet2Dimensions = [
    { width: 200.6, height: 63.9 },
    { width: 63.9, height: 42.3 },
    { width: 42.3, height: 63.9 },
  ];

  const cubeSet3Dimensions = [
    { width: 217.9, height: 53.3 },
    { width: 53.3, height: 46.8 },
    { width: 46.8, height: 53.3 },
  ];

  const cylinderSet1Dimensions = [
    { width: 212.9, height: 58.6 },
    { width: 58.6, height: 51.2 },
    { width: 51.2, height: 58.6 },
  ];

  const cylinderSet2Dimensions = [
    { width: 215.2, height: 49.2 },
    { width: 49.2, height: 57.1 },
    { width: 57.1, height: 49.2 },
  ];

  const cylinderSet3Dimensions = [
    { width: 254.6, height: 48.1 },
    { width: 48.1, height: 29.5 },
    { width: 29.5, height: 48.1 },
  ];
  
  const shapeSets = {
    set1: { sphere: 4.899, cube: 21.202, cylinder: 50.138 },
    set2: { sphere: 8.969, cube: 38.866, cylinder: 34.035 },
    set3: { sphere: 2.251, cube: 11.740, cylinder: 6.108 }
  };
  const shapeColors = {
    set1: { sphere: '#ffc87fff', cube: '#ffc87fff', cylinder: '#ffc87fff' },
    set2: { sphere: '#e69b56ff', cube: '#e69b56ff', cylinder: '#e69b56ff' },
    set3: { sphere: '#b7b7b7ff', cube: '#b7b7b7ff', cylinder: '#b7b7b7ff' }
  };

  const shapeGradients = {
    set1: {
      sphere: 'radial-gradient(circle, #ffc87fff, #cea064)',
      cube: 'linear-gradient(45deg, #ffc87fff, #cea064)',
      cylinder: 'linear-gradient(45deg, #ffc87fff, #cea064)'
    },
    set2: {

      sphere: 'radial-gradient(circle, #e69b56ff, #c07d3f)',
      cube: 'linear-gradient(45deg, #e69b56ff, #c07d3f)',
      cylinder: 'linear-gradient(45deg, #e69b56ff, #c07d3f)'
    },
    set3: {
      sphere: 'radial-gradient(circle, #b7b7b7ff, #9b9b9b)',
      cube: 'linear-gradient(45deg, #b7b7b7ff, #9b9b9b)',
      cylinder: 'linear-gradient(45deg, #b7b7b7ff, #9b9b9b)'
    }
  };

  document.getElementById("View1").addEventListener("click", () => {
    const selectedSet = document.getElementById("shapeSetSelector").value;
    let dimensions;
    let colorSet;
    let shapeClasses;
    switch (selectedSet) {
      case 'set1':
        dimensions = sphereSet1Dimensions;
        colorSet = set1Colors;
        shapeClasses = ["sphere", "sphere", "sphere"];
        break;
      case 'set2':
        dimensions = sphereSet2Dimensions;
        colorSet = set2Colors;
        shapeClasses = ["sphere", "sphere", "sphere"];
        break;
      case 'set3':
        dimensions = sphereSet3Dimensions;
        colorSet = set3Colors;
        shapeClasses = ["sphere", "sphere", "sphere"];
        break;
      default:
        dimensions = []; // Default to an empty array
    }
    addShapes_1(shapeClasses, dimensions, colorSet);
  });
  document.getElementById("View2").addEventListener("click", () => {
    const selectedSet = document.getElementById("shapeSetSelector").value;
    let dimensions;
    let colorSet;
    let shapeClasses;
    switch (selectedSet) {
      case 'set1':
        dimensions = cubeSet1Dimensions;
        colorSet = set1Colors;
        shapeClasses = ["cube", "cube", "cube"];
        break;
      case 'set2':
        dimensions = cubeSet2Dimensions;
        colorSet = set2Colors;
        shapeClasses = ["cube", "cube", "cube"];
        break;
      case 'set3':
        dimensions = cubeSet3Dimensions;
        colorSet = set3Colors;
        shapeClasses = ["cube", "cube", "cube"];
        break;
      default:
        dimensions = []; // Default to an empty array
    }
    addShapes_1(shapeClasses, dimensions, colorSet);
  });
  document.getElementById("View3").addEventListener("click", () => {
    const selectedSet = document.getElementById("shapeSetSelector").value;
    let dimensions;
    let colorSet;
    let shapeClasses;
    switch (selectedSet) {
      case 'set1':
        dimensions = cylinderSet1Dimensions;
        colorSet = set1Colors;
        shapeClasses = ["cylinder", "sphere", "sphere"];
        break;
      case 'set2':
        dimensions = cylinderSet2Dimensions;
        colorSet = set2Colors;
        shapeClasses = ["cylinder", "sphere", "sphere"];
        break;
      case 'set3':
        dimensions = cylinderSet3Dimensions;
        colorSet = set3Colors;
        shapeClasses = ["cylinder", "sphere", "sphere"];
        break;
      default:
        dimensions = []; // Default to an empty array
    }
    addShapes_1(shapeClasses, dimensions, colorSet);
  });    

function addShape(shape) {
  if (!currentSet || addedShapes[shape]) return;

  const shapeElement = document.createElement("div");
  shapeElement.classList.add("shape", shape);
  if (shape === "cube") {
    shapeElement.style.width = "50px";  // Make it a rectangle
    shapeElement.style.height = "30px";
  } else {
    shapeElement.style.width = "30px";
    shapeElement.style.height = shape === "cylinder" ? "40px" : "30px";
  }

  shapeElement.style.background = shapeGradients[currentSet][shape];
  shapeElement.style.border = "1px solid black"; // Add black border

  if (shape === "sphere") {
    shapeElement.style.borderRadius = "50%";
  }

  let pan = document.getElementById("pan");

  // Get the pan's position
  const panRect = pan.getBoundingClientRect();

  // Position the shape on top of the balance pan
  shapeElement.style.position = "absolute";
  shapeElement.style.bottom = "10px"; // Adjust this value so the shape rests on the pan
  shapeElement.style.left = "50%";
  shapeElement.style.transform = "translateX(-50%)";

  pan.appendChild(shapeElement); // Append to body so positioning works correctly
  addedShapes[shape] = { element: shapeElement, mass: shapeSets[currentSet][shape] };
  totalWeight += shapeSets[currentSet][shape];

  updateMassDisplay1();
  }

  document.getElementById("tareButton").addEventListener("click", () => {
    tareOffset = totalWeight;
    updateMassDisplay1();
  });
  document.getElementById("removeShapes").addEventListener("click", removeShapes);
  document.getElementById("addSphere").addEventListener("click", () => addShape("sphere"));
  document.getElementById("addCube").addEventListener("click", () => addShape("cube"));
  document.getElementById("addCylinder").addEventListener("click", () => addShape("cylinder"));


</script>
</body>
</html>
